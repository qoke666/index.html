<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TMA –ì–ª–∞–≤–Ω–∞—è</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');

  body { 
    margin: 0; 
    font-family: 'Inter', sans-serif; 
    background: #080808; 
    color: #ffffff; 
    overflow-y: auto; 
  }
  a { text-decoration: none; }
  ul { list-style: none; margin: 0; padding: 0; }

  .menu-top { display: flex; justify-content: flex-start; align-items: center; padding: 16px; }
  .menu-top .logo { width: 100px; }

  .carousel { 
    position: relative; 
    width: 343px; 
    height: 136px; 
    margin: 0 auto; 
    border-radius: 12px; 
    overflow: hidden; 
    background: #000; 
    max-width: 100%; 
  }
  .carousel a { 
    display: block; 
    width: 100%; 
    height: 100%; 
    position: absolute; 
    top: 0; 
    left: 0; 
    opacity: 0; 
    transition: opacity .5s; 
  }
  .carousel a.active { opacity: 1; z-index: 1; }
  .carousel img { width: 100%; height: 100%; object-fit: cover; display: block; }
  .carousel .hot { 
    position: absolute; 
    top: 8px; 
    left: 16px; 
    font-size: 20px; 
    font-weight: 500; 
    color: #ffffff; 
    z-index: 2; 
  }
  .carousel-dots { 
    position: absolute; 
    bottom: 8px; 
    left: 50%; 
    transform: translateX(-50%); 
    display: flex; 
    gap: 5px; 
    z-index: 2; 
  }
  .carousel-dots .dot { 
    width: 5px; 
    height: 5px; 
    border-radius: 50%; 
    background: rgba(255,255,255,0.3); 
    cursor: pointer; 
  }
  .carousel-dots .dot.active { background: rgba(255,255,255,0.9); }

  .menu {
    display: flex;
    justify-content: center;
    background: #080808;
    padding: 12px 0;
    position: sticky;
    top: 0;
    z-index: 10;
    max-width: 100%;
  }
  .menu ul {
    display: inline-flex;
    gap: 10px;
    padding: 0 16px;
    overflow-x: auto;
    white-space: nowrap;
    scroll-behavior: smooth;
    touch-action: pan-x;
    -webkit-overflow-scrolling: touch;
  }
  .menu ul::-webkit-scrollbar { display: none; }
  .menu-item {
    padding: 6px 12px;
    border-radius: 6px;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    color: #ccc;
    transition: background .3s, color .3s;
  }
  .menu-item.active, .menu-item:hover {
    background: #d5fd02;
    color: #080808;
  }

  .section { 
    display: none; 
    padding: 24px 16px; 
    box-sizing: border-box; 
  }
  .section.active { display: block; }
  .back-button { 
    display: inline-flex; 
    align-items: center; 
    gap: 6px; 
    margin-bottom: 16px; 
    padding: 6px 12px; 
    background: #d5fd02; 
    color: #080808; 
    border: none; 
    border-radius: 6px; 
    cursor: pointer; 
    font-weight: 600; 
  }

  .section-title { 
    font-size: 24px; 
    font-weight: 600; 
    margin: 24px 0; 
    color: #d5fd02; 
  }

  .grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); 
    gap: 16px; 
  }
  .card { 
    background: #111315; 
    border: 1px solid #222; 
    border-radius: 12px; 
    color: #ccc; 
    transition: transform .2s; 
    position: relative; 
    overflow: hidden; 
  }
  .card:hover { transform: scale(1.02); }
  #home .card img, #articles .card img, #cases .card img { 
    width: 100%; 
    height: 120px; 
    object-fit: cover; 
    display: block; 
  }
  #vacancies .card { 
    padding: 12px; 
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
  }
  .card .text-overlay { 
    position: absolute; 
    bottom: 0; 
    left: 0; 
    right: 0; 
    background: rgba(0,0,0,0.6); 
    padding: 8px; 
  }
  .card strong { 
    display: block; 
    font-size: 14px; 
    color: #ffffff; 
    margin-bottom: 4px; 
  }
  .card p { 
    font-size: 12px; 
    color: #bbb; 
    margin: 0; 
  }

  #team .card img { 
    width: 60px; 
    height: 60px; 
    object-fit: cover; 
    margin-bottom: 8px; 
    border-radius: 50%; 
  }

  .team-carousel { 
    margin: 16px 0; 
    max-width: 100%; 
    overflow: hidden; 
  }
 .team-list {
    display: inline-flex;
    gap: 12px;
    padding: 0 16px;
    overflow-x: auto;
    white-space: nowrap;
    scroll-behavior: smooth;
    touch-action: pan-x;
    -webkit-overflow-scrolling: touch;
    width: 100%;
    box-sizing: border-box;
}
  .team-list::-webkit-scrollbar { display: none; }
  .team-item {
    flex: 0 0 160px;
    padding: 12px;
    text-align: center;
    transition: transform .2s;
  }
  .team-item:hover { transform: scale(1.02); }
  .team-item img { 
    width: 60px; 
    height: 60px; 
    object-fit: cover; 
    border-radius: 50%; 
    margin: 0 auto 8px; 
    display: block; 
  }
  .team-item strong { 
    display: block; 
    font-size: 14px; 
    color: #ffffff; 
    margin-bottom: 4px; 
  }
 .team-item p { 
    font-size: 12px; 
    color: #bbb; 
    margin: 0; 
}
.actual-list-container {
    margin: 16px 0;
    max-width: 100%;
    overflow: hidden;
}
.actual-list {
    display: inline-flex;
    gap: 12px;
    padding: 0 16px;
    overflow-x: auto;
    white-space: nowrap;
    scroll-behavior: smooth;
    touch-action: pan-x;
    -webkit-overflow-scrolling: touch;
    width: 100%;
    box-sizing: border-box;
}
.actual-list::-webkit-scrollbar {
    display: none;
}
.actual-item {
    flex: 0 0 160px;
}
.actual-item .card {
    border-radius: 12px; /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤ */
    overflow: hidden; /* –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —É–≥–ª—ã –Ω–µ –æ–±—Ä–µ–∑–∞—é—Ç—Å—è */
    display: block; /* –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∫–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É */
}
.actual-item .card img {
    border-radius: 12px 12px 0 0; /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω–∏—Ö —É–≥–ª–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
    width: 100%;
    height: 120px;
    object-fit: cover;
}
</style>
</head>
<body>
<div class="menu-top">
  <img class="logo" src="https://i.postimg.cc/90gRT1n1/Frame-277131232-2.png" alt="TMA Logo" />
</div>

<!-- –ö–∞—Ä—É—Å–µ–ª—å —Å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ -->
<div class="carousel">
  <a href="https://traffnews.com/intervju/kto-takoi-co-owner-kompanii/?utm_source=tg" target="_blank" class="active">
    <img src="https://i.postimg.cc/yNL8QJ8S/owner-02-3.jpg" alt="–¢–∏—Ö–æ–Ω" />
  </a>
  <a href="https://telegra.ph/SCAM-kejs-ot-AMERIOBET-hronologiya-prufy-i-dolg-na-90-000-03-18" target="_blank">
    <img src="https://i.postimg.cc/bJqQWjv5/photo-2025-03-18-15-18-14.jpg" alt="SCAM –∫–µ–π—Å" />
  </a>
  <a href="https://www.instagram.com/reel/DKHZPnYtjQD/?igsh=MTFobTRvMnpma3oxbA==" target="_blank">
    <img src="https://i.postimg.cc/Z57qjBRv/feat-mac.jpg" alt="–º–∞–∫" />
  </a>
  <div class="hot"></div>
  <div class="carousel-dots">
    <div class="dot active"></div>
    <div class="dot"></div>
    <div class="dot"></div>
  </div>
</div>

<nav class="menu">
  <ul>
    <li class="menu-item active" data-section="home">–ì–ª–∞–≤–Ω–∞—è</li>
    <li class="menu-item" data-section="articles">–°—Ç–∞—Ç—å–∏</li>
    <li class="menu-item" data-section="cases">–ö–µ–π—Å—ã</li>
    <li class="menu-item" data-section="vacancies">–í–∞–∫–∞–Ω—Å–∏–∏</li>
    <li class="menu-item" data-section="team">–í –†–ê–ó–†–ê–ë–û–¢–ö–ï</li>
  </ul>
</nav>

<section id="home" class="section active">
  <h2 class="section-title">–ê–ö–¢–£–ê–õ–¨–ù–û–ï</h2>
<div class="actual-list-container">
  <ul class="actual-list">
    <li class="actual-item">
      <a class="card" href="https://cpalenta.ru/keys-130-000-za-2-mesyatsa-s-aso-v-brazilii-na-privatnom-offere-thelimitedclub/" target="_blank" data-id="actual_1" data-title="–ì–µ–º–±–ª–∏–Ω–≥ –∫–µ–π—Å: $130 000+">
        <img src="https://i.postimg.cc/7PGWRRNZ/130k.jpg" alt="–ì–µ–º–±–ª–∏–Ω–≥ –∫–µ–π—Å" />
        <div class="text-overlay">
          <strong></strong>
          <p></p>
        </div>
      </a>
    </li>
    <li class="actual-item">
      <a class="card" href="https://telegra.ph/SCAM-kejs-ot-AMERIOBET-hronologiya-prufy-i-dolg-na-90-000-03-18" target="_blank" data-id="actual_2" data-title="SCAM –∫–µ–π—Å –æ—Ç AMERIO.BET">
        <img src="https://i.postimg.cc/X7KQS6B4/scam.jpg" alt="SCAM –∫–µ–π—Å" />
        <div class="text-overlay">
          <strong></strong>
          <p></p>
        </div>
      </a>
    </li>
    <li class="actual-item">
      <a class="card" href="https://telegra.ph/Kak-podnyat-kachestvo-trafika-v-gemblinge-04-09" target="_blank" data-id="actual_3" data-title="–ö–∞—á–µ—Å—Ç–≤–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ –≥–µ–º–±–ª–∏–Ω–≥–µ">
        <img src="https://i.postimg.cc/hjQFNVwD/photo-2025-05-14-20-01-19.jpg" alt="–°—Ç–∞—Ç—å—è" />
        <div class="text-overlay">
          <strong></strong>
          <p></p>
        </div>
      </a>
    </li>
    <li class="actual-item">
      <a class="card" href="https://t.me/zakacreator" target="_blank" data-id="actual_4" data-title="–í–∞–∫–∞–Ω—Å–∏—è: –¢—Ä–∞—Ñ–∏–∫ –º–µ–Ω–µ–¥–∂–µ—Ä">
        <img src="https://i.postimg.cc/YSG4qP0S/traffic-manager.jpg" alt="–í–∞–∫–∞–Ω—Å–∏—è" />
        <div class="text-overlay">
          <strong></strong>
          <p></p>
        </div>
      </a>
    </li>
  </ul>
</div>
  <h2 class="section-title">–ö–û–ú–ê–ù–î–ê</h2>
  <div class="team-carousel">
    <ul class="team-list">
      <li class="team-item">
        <a href="https://t.me/Evgenii_Limited" target="_blank">
          <img src="https://i.postimg.cc/yN5SkL2P/3.webp" alt="Evgenii" />
          <strong>Evgenii Limited</strong>
          <p>Co-owner</p>
        </a>
      </li>
      <li class="team-item">
        <a href="https://t.me/t_limited" target="_blank">
          <img src="https://i.postimg.cc/KjgCWLjQ/4.webp" alt="Tikhon" />
          <strong>Tikhon Limited</strong>
          <p>Co-owner</p>
        </a>
      </li>
      <li class="team-item">
        <a href="https://t.me/Denis_limited" target="_blank">
          <img src="https://i.postimg.cc/GmQ3z0Zt/6-new.webp" alt="Anna" />
          <strong>Denis Limited</strong>
          <p>Head of Affiliate</p>
        </a>
      </li>
      <li class="team-item">
        <a href="https://t.me/sasha_limited" target="_blank">
          <img src="https://i.postimg.cc/gkyGkFcs/2.webp" alt="Dmitry" />
          <strong>Aleksandra Limited</strong>
          <p>Head of Sales</p>
        </a>
      </li>
      <li class="team-item">
        <a href="https://t.me/ksu_limited" target="_blank">
          <img src="https://i.postimg.cc/SxDqC6Mz/1.webp" alt="Elena" />
          <strong>Ksenia Limited</strong>
          <p>Team Lead Affiliate Manager</p>
        </a>
      </li>
      <li class="team-item">
        <a href="https://t.me/katerinaHR_limited" target="_blank">
          <img src="https://i.postimg.cc/hGvnrXLZ/7.jpg" alt="Sergey" />
          <strong>Katerina Limited</strong>
          <p>HRD</p>
        </a>
      </li>
      <li class="team-item">
        <a href="https://t.me/Alexandr_limited" target="_blank">
          <img src="https://i.postimg.cc/yNGHr7n1/5-new.webp" alt="Maria" />
          <strong>Alexander Limited</strong>
          <p>–°–≤—è–∑—å –ø–æ PR –∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É</p>
        </a>
      </li>
    </ul>
  </div>
</section>

<section id="articles" class="section">
  <h2 class="section-title">–°–¢–ê–¢–¨–ò</h2>
  <div class="grid">
    <a class="card" href="https://telegra.ph/Kak-podnyat-kachestvo-trafika-v-gemblinge-neskolko-prakticheskih-mehanik-04-09" target="_blank">
      <img src="https://i.postimg.cc/JzZmWnct/quality.jpg" alt="–°—Ç–∞—Ç—å—è 1" />
      <div class="text-overlay">
        <strong>–∫–∞—á–µ—Å—Ç–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞</strong>
        <p></p>
      </div>
    </a>
    <a class="card" href="https://www.instagram.com/p/DCOei_ItMsf/?igsh=YzFudTVhbGlteGJr" target="_blank">
      <img src="https://i.postimg.cc/63LfsdTz/partners.jpg" alt="–æ—Ç–∑—ã–≤—ã" />
      <div class="text-overlay">
        <strong></strong>
        <p></p>
      </div>
    </a>
  <a class="card" href="https://traffhub.media/articles/gambling/nyuansy-vybora-gembling-offerov/" target="_blank">
      <img src="https://i.postimg.cc/q77T6LH6/offer.jpg" alt="–æ—Ñ—Ñ–µ—Ä" />
      <div class="text-overlay">
        <strong></strong>
        <p></p>
      </div>
    </a>
  <a class="card" href="https://traffnews.com/intervju/kto-takoi-co-owner-kompanii/?utm_source=tg" target="_blank">
      <img src="https://i.postimg.cc/gcKrhgfN/owner-01-3.jpg" alt="–¢–∏—Ö–æ–Ω" />
      <div class="text-overlay">
        <strong></strong>
        <p></p>
      </div>
    </a>
  </div>
</section>

<section id="cases" class="section">
  <h2 class="section-title">–ö–ï–ô–°–´</h2>
  <div class="grid">
    <a class="card" href="https://cpalenta.ru/keys-130-000-za-2-mesyatsa-s-aso-v-brazilii-na-privatnom-offere-thelimitedclub/" target="_blank">
      <img src="https://i.postimg.cc/7PGWRRNZ/130k.jpg" alt="–ì–µ–º–±–ª–∏–Ω–≥ –∫–µ–π—Å" />
      <div class="text-overlay">
        <strong></strong>
        <p></p>
      </div>
    </a>
    <a class="card" href="https://telegra.ph/SCAM-kejs-ot-AMERIOBET-hronologiya-prufy-i-dolg-na-90-000-03-18" target="_blank">
      <img src="https://i.postimg.cc/X7KQS6B4/scam.jpg" alt="SCAM –∫–µ–π—Å" />
      <div class="text-overlay">
        <strong></strong>
        <p></p>
      </div>
    </a>
  </div>
</section>

<section id="vacancies" class="section">
  <h2 class="section-title">–í–ê–ö–ê–ù–°–ò–ò</h2>
  <div class="grid">
    <a class="card" href="https://t.me" target="_blank">
      <strong>smm</strong>
      <p>–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –æ—Ç 1 –≥–æ–¥–∞</p>
    </a>
    <a class="card" href="https://t.me" target="_blank">
      <strong>smm</strong>
      <p>–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –æ—Ç 1 –≥–æ–¥–∞</p>
    </a>
  </div>
</section>

<section id="gift" class="section">
  <h2 class="section-title">–ü–æ–¥–∞—Ä–∫–∏</h2>

  <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–æ–ø—ã—Ç–∫–∏ –≤—ã–∏–≥—Ä–∞—Ç—å -->
  <div style="text-align: center; margin: 24px 0;">
    <button id="gift-button" 
            style="
              padding: 12px 24px;
              background: #d5fd02;
              color: #080808;
              border: none;
              border-radius: 8px;
              font-weight: 600;
              font-size: 16px;
              cursor: pointer;
              transition: background .3s;
            ">
      –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—ã–∏–≥—Ä–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫
    </button>
  </div>

  <!-- –ë–ª–æ–∫ –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ -->
  <div id="gift-result" 
       style="
         text-align: center; 
         margin-top: 16px; 
         font-size: 16px; 
         color: #ffffff;
       ">
    <!-- —Å—é–¥–∞ JS –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä: ¬´–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ –ü–æ–¥–∞—Ä–æ–∫ A¬ª –∏–ª–∏ ¬´–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ –ø–æ–≤–µ–∑–ª–æ¬ª -->
  </div>
</section>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
    const tg = window.Telegram.WebApp;
    tg.expand();

    // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
    let user_id = null, username = null, first_name = null, last_name = null;
    if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
      ({ id: user_id, username, first_name, last_name } = tg.initDataUnsafe.user);
    }

    // URL –¥–ª—è Google Apps Script (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π)
    const SHEET_ENDPOINT = 'https://script.google.com/macros/s/AKfycbxm5EL306NS2zODtWC4BzsV7yj8F_qj_47YmwknE_CzPDLuNBKeMqfhhoiNh6Bv8sSj7Q/exec';

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ù–ê–ß–ê–õ–û –ë–õ–û–ö–ê: –õ–û–ì–ò–ö–ê –ï–ñ–ï–ù–ï–î–ï–õ–¨–ù–û–ì–û –ü–û–î–ê–†–ö–ê ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    // 1. –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π ISO-–Ω–µ–¥–µ–ª–∏ (–≤ —Ñ–æ—Ä–º–∞—Ç–µ "YYYY-WW")
    function getCurrentWeekKey() {
      const now = new Date();
      const date = new Date(Date.UTC(now.getFullYear(), now.getMonth(), now.getDate()));
      const dayOfYear = Math.floor((date - new Date(Date.UTC(date.getUTCFullYear(), 0, 1))) / 86400000) + 1;
      const jan1 = new Date(Date.UTC(date.getUTCFullYear(), 0, 1));
      const jan1Day = ((jan1.getUTCDay() + 6) % 7) + 1; // 1..7, 1=–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
      let weekNumber = Math.floor((dayOfYear + jan1Day - 1) / 7);
      let isoYear = date.getUTCFullYear();

      if (weekNumber < 1) {
        // –ï—Å–ª–∏ —ç—Ç–æ —á–∞—Å—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –≥–æ–¥–∞
        const dec31Prev = new Date(Date.UTC(isoYear - 1, 11, 31));
        return getWeekKeyFromDate(dec31Prev);
      }
      // –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ ISO-—Å—Ç–∞–Ω–¥–∞—Ä—Ç—É >52/53
      const weekString = weekNumber < 10 ? '0' + weekNumber : '' + weekNumber;
      return `${isoYear}-${weekString}`;
    }
    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∫—Ä–∞–π–Ω–∏—Ö —Å–ª—É—á–∞–µ–≤ (31 –¥–µ–∫–∞–±—Ä—è)
    function getWeekKeyFromDate(dateObj) {
      const dayOfYear = Math.floor((dateObj - new Date(Date.UTC(dateObj.getUTCFullYear(), 0, 1))) / 86400000) + 1;
      const jan1 = new Date(Date.UTC(dateObj.getUTCFullYear(), 0, 1));
      const jan1Day = ((jan1.getUTCDay() + 6) % 7) + 1;
      let weekNumber = Math.floor((dayOfYear + jan1Day - 1) / 7);
      let isoYear = dateObj.getUTCFullYear();
      if (weekNumber < 1) {
        const dec31Prev = new Date(Date.UTC(isoYear - 1, 11, 31));
        return getWeekKeyFromDate(dec31Prev);
      }
      const weekString = weekNumber < 10 ? '0' + weekNumber : '' + weekNumber;
      return `${isoYear}-${weekString}`;
    }

    // 2. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –º–∞—Å—Å–∏–≤ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤
    const WEEKLY_GIFT_CHANCE = 0.10; // 10% —à–∞–Ω—Å
    const GIFTS = ['–ü–æ–¥–∞—Ä–æ–∫ A', '–ü–æ–¥–∞—Ä–æ–∫ B', '–ü–æ–¥–∞—Ä–æ–∫ C'];

    // 3. –í—ã–±–æ—Ä –æ–¥–Ω–æ–≥–æ –∏–∑ —Ç—Ä—ë—Ö –ø–æ–¥–∞—Ä–∫–æ–≤ —Å —Ä–∞–≤–Ω–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é
    function getRandomGiftType() {
      const rnd = Math.random(); // [0;1)
      if (rnd < 1/3) return GIFTS[0];
      else if (rnd < 2/3) return GIFTS[1];
      else return GIFTS[2];
    }

    // 4. –ü–æ–∫–∞–∑ –º–æ–¥–∞–ª–∫–∏/–ø–æ–ø-–∞–ø–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤—ã–∏–≥—Ä—ã—à–µ
    function showGiftPopup(giftType) {
      const popup = document.createElement('div');
      popup.style.position = 'fixed';
      popup.style.top = '50%';
      popup.style.left = '50%';
      popup.style.transform = 'translate(-50%, -50%)';
      popup.style.background = '#222';
      popup.style.border = '2px solid #d5fd02';
      popup.style.borderRadius = '12px';
      popup.style.padding = '24px';
      popup.style.zIndex = 9999;
      popup.style.textAlign = 'center';
      popup.style.color = '#fff';
      popup.innerHTML = `
        <h3 style="margin:0 0 12px; color:#d5fd02;">–£—Ä–∞! üéâ</h3>
        <p>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, –≤–∞–º –≤—ã–ø–∞–ª <strong>${giftType}</strong>!</p>
        <button id="gift-close-button" 
                style="
                  margin-top:16px;
                  padding:8px 16px;
                  background:#d5fd02; 
                  color:#080808; 
                  border:none; 
                  border-radius:6px; 
                  font-weight:600;
                  cursor:pointer;">
          –ó–∞–∫—Ä—ã—Ç—å
        </button>
      `;
      document.body.appendChild(popup);
      document.getElementById('gift-close-button').addEventListener('click', () => {
        popup.remove();
      });
    }

    // 5. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–∫—Ç–∞ –≤—ã–∏–≥—Ä—ã—à–∞ –≤ Google –¢–∞–±–ª–∏—Ü—É (–ª–∏—Å—Ç GiftWinners)
    function sendGiftToSheet(user_id, weekKey, giftType) {
      const payload = {
        event: 'weekly_gift_win',
        user_id: user_id,
        username: username,
        first_name: first_name,
        last_name: last_name,
        weekKey: weekKey,
        giftType: giftType,
        timestamp: new Date().toISOString()
      };
      // –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é sendToSheet, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ—Ç JSON
      sendToSheet(payload);
    }

    // 6. –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ ¬´—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é¬ª
    function checkAndGrantWeeklyGift() {
      if (!tg.initDataUnsafe || !tg.initDataUnsafe.user) return;
      const weekKey = getCurrentWeekKey();                // –Ω–∞–ø—Ä–∏–º–µ—Ä, "2025-23"
      const storageKey = `gift_checked_${user_id}_${weekKey}`;

      // –ï—Å–ª–∏ —É–∂–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∏ (–≤ localStorage –µ—Å—Ç—å —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ) ‚Äî –≤—ã—Ö–æ–¥–∏–º
      if (localStorage.getItem(storageKey)) {
        return;
      }

      // –ò–Ω–∞—á–µ ‚Äî –±—Ä–æ—Å–∞–µ–º ¬´–∫—É–±–∏–∫¬ª –æ–¥–∏–Ω —Ä–∞–∑
      const rndChance = Math.random();
      if (rndChance < WEEKLY_GIFT_CHANCE) {
        // –ü–æ–¥–∞—Ä–æ–∫ –≤—ã–ø–∞–ª
        const giftType = getRandomGiftType();
        showGiftPopup(giftType);
        sendGiftToSheet(user_id, weekKey, giftType);
        localStorage.setItem(storageKey, `yes_${giftType}`);
      } else {
        // –ü–æ–¥–∞—Ä–æ–∫ –Ω–µ –≤—ã–ø–∞–ª, –Ω–æ –º—ã –ø–æ–º–µ—á–∞–µ–º, —á—Ç–æ –ø–æ–ø—ã—Ç–∫–∞ –±—ã–ª–∞
        localStorage.setItem(storageKey, 'no');
      }
    }

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ö–û–ù–ï–¶ –ë–õ–û–ö–ê: –õ–û–ì–ò–ö–ê –ï–ñ–ï–ù–ï–î–ï–õ–¨–ù–û–ì–û –ü–û–î–ê–†–ö–ê ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

    // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É –≤–∞—Å —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª—é–±—ã—Ö –¥—Ä—É–≥–∏—Ö —Å–æ–±—ã—Ç–∏–π
    function sendToSheet(data) {
      fetch(SHEET_ENDPOINT, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
    }

    function trackEvent(eventName, additional = {}) {
      sendToSheet({
        event: eventName,
        user_id,
        username,
        first_name,
        last_name,
        url: window.location.href,
        userAgent: navigator.userAgent,
        additional
      });
    }

    // –õ–æ–≥ –æ—Ç–∫—Ä—ã—Ç–∏—è Web App
    trackEvent('webapp_open');

    // –ù–∞–≤–µ—à–∏–≤–∞–µ–º –≤–∞—à–∏ —Å–ª—É—à–∞—Ç–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π (–∫–∞–∫ –±—ã–ª–æ —É –≤–∞—Å)
    document.querySelectorAll('.menu-item').forEach(item => {
      item.addEventListener('click', () => {
        trackEvent('nav_click', { section: item.dataset.section });
      });
    });
    document.querySelectorAll('.card, .team-item a').forEach(card => {
      card.addEventListener('click', () => {
        const title = card.querySelector('strong')?.innerText || 'Unknown';
        trackEvent('card_click', { title });
      });
    });
    document.querySelectorAll('.carousel a').forEach(slide => {
      slide.addEventListener('click', () => {
        const alt = slide.querySelector('img')?.getAttribute('alt') || 'Unknown';
        trackEvent('carousel_click', { slide: alt });
      });
    });
    document.querySelectorAll('.carousel-dots .dot').forEach((dot, i) => {
      dot.addEventListener('click', () => {
        trackEvent('carousel_dot_click', { slideIndex: i });
      });
    });

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–π
    const items = document.querySelectorAll('.menu-item');
    const sections = document.querySelectorAll('.section');
    function showSection(sectionId) {
      sections.forEach(sec => sec.classList.toggle('active', sec.id === sectionId));
      items.forEach(item => item.classList.toggle('active', item.dataset.section === sectionId));
      window.scrollTo(0, 0);
    }
    items.forEach(item => item.addEventListener('click', () => showSection(item.dataset.section)));

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—É—Å–µ–ª—å—é
    const slides = document.querySelectorAll('.carousel a');
    const dots = document.querySelectorAll('.carousel-dots .dot');
    let currentSlide = 0;
    function showSlide(index) {
      slides.forEach((slide, i) => slide.classList.toggle('active', i === index));
      dots.forEach((dot, i) => dot.classList.toggle('active', i === index));
    }
    dots.forEach((dot, i) => dot.addEventListener('click', () => {
      currentSlide = i;
      showSlide(i);
    }));
    setInterval(() => {
      currentSlide = (currentSlide + 1) % slides.length;
      showSlide(currentSlide);
    }, 5000);

    // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –º–µ–Ω—é, team-list –∏ actual-list
    const scrollableLists = document.querySelectorAll('.menu ul, .team-list, .actual-list');
    scrollableLists.forEach(list => {
      list.addEventListener('wheel', (e) => {
        e.preventDefault();
        const delta = Math.abs(e.deltaX) > Math.abs(e.deltaY) ? e.deltaX : e.deltaY;
        list.scrollLeft += delta * 2.5;
      });
    });

    // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –í–´–ó–û–í –ü–†–û–í–ï–†–ö–ò –ü–û–î–ê–†–ö–ê ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    checkAndGrantWeeklyGift();

  </script>
</body>
</html>
